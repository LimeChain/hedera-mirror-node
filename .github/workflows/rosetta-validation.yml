name: Rosetta Validation

on:
  - pull_request

jobs:
  validate:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v2

    - name: Run Rosetta Mirror Node
      run: docker-compose up --build -d

    - name: Wait for Mirror Node to start (90s)
      run: sleep 90

    - name: Run CLI Validation
      run: bash ./hedera-mirror-rosetta/validation/run-validation.sh
